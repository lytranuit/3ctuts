/*!
* Clamp.js 0.2
*
* Copyright 2011, Joseph Schmitt http://reusablebits.com, http://josephschmitt.me
* Released under the WTFPL license
* http://sam.zoy.org/wtfpl/
*/
(function(){window.$clamp=function(d,h){function r(a,b){if(!n.getComputedStyle)n.getComputedStyle=function(j){this.el=j;this.getPropertyValue=function(i){var s=/(\-([a-z]){1})/g;if(i=="float")i="styleFloat";if(s.test(i))i=i.replace(s,function(y,z,w){return w.toUpperCase()});return j.currentStyle&&j.currentStyle[i]?j.currentStyle[i]:null};return this};return n.getComputedStyle(a,null).getPropertyValue(b)}function t(a){a=a||d.clientHeight;var b=u(d);return Math.max(Math.floor(a/b),0)}function u(a){var b=
r(a,"line-height");if(b=="normal")b=parseInt(r(a,"font-size"))*1.2;return parseInt(b)}function m(a){if(a.children.length>0)return m(Array.prototype.slice.call(a.children).pop());else if(!a.lastChild||!a.lastChild.nodeValue||a.lastChild.nodeValue==""||a.lastChild.nodeValue=="\u2026"){a.parentNode.removeChild(a);return m(d)}else return a.lastChild}function o(a,b){if(b){var j=a.nodeValue.replace(/\u2026/,"");if(!c){f=k.length>0?k.shift():"";c=j.split(f)}if(c&&c.length>1){p=c.pop();q(a,c.join(f))}else c=
null;if(d.clientHeight<=b)if(k.length>=0&&f!=""){q(a,c.join(f)+f+p);c=null}else return false;else if(!c&&f==""){q(a,"");a=m(d);k=l.splitOnChars.slice(0);f=k[0];p=c=null}l.animate?setTimeout(function(){o(a,b)},10):o(a,b)}}function q(a,b){a.nodeValue=b+"\u2026"}h=h||{};var n=window,l={clamp:h.clamp||2,useNativeClamp:typeof h.useNativeClamp!="undefined"?h.useNativeClamp:true,splitOnChars:h.splitOnChars||[".","-","\u2013","\u2014"," "],animate:h.animate||false},g=d.style,x=typeof d.style.webkitLineClamp!=
"undefined",e=l.clamp,v=e.indexOf&&(e.indexOf("px")>-1||e.indexOf("em")>-1),k=l.splitOnChars.slice(0),f=k[0],c,p;if(e=="auto")e=t();else if(v)e=t(parseInt(e));if(x&&l.useNativeClamp){g.overflow="hidden";g.textOverflow="ellipsis";g.webkitBoxOrient="vertical";g.display="-webkit-box";g.webkitLineClamp=e;if(v)g.height=l.clamp+"px"}else{g=u(d)*e;o(m(d),g)}}})();